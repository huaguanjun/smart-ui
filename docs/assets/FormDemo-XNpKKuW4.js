import{r as E,i as q,a as J}from"./utils-CiEdCm-o.js";import{g as U,k as S,f as L,u as W,r as k,i as T,o as y,w as C,d as M,c as D,j as N,l as n,F as A,m as Y,n as z,p as R,q as $,_ as H,e as G,t as K,s as Q,x as X,y as Z,b as j}from"./app-ky5rt28X.js";function g(e){const a={...e};if(e.labelWidth&&!e.labelCol?.style?.width){const c=typeof e.labelWidth=="number"?`${e.labelWidth}px`:e.labelWidth;a.labelCol={...e.labelCol,style:{...e.labelCol?.style,width:c}}}return a}function ee(e,a){return a&&(q(e)&&a==="middle"?"default":J(e)&&a==="default"?"middle":a)}function ae(e){const a=U(new Map),c=S(()=>E(e.adapter)),x=S(()=>({model:e.model,rules:e.rules,fields:e.fields,inline:e.inline,disabled:e.disabled}));return{formProps:S(()=>{const b=c.value,o=ee(b,e.size);return q(b)?{...e,...x.value,size:o,labelWidth:e.labelWidth,labelPosition:e.labelPosition}:J(b)?g({...e,...x.value,size:o}):{...e,...x.value,size:o}}),registerField:b=>{b?.name&&a.value.set(b.name,b)},unregisterField:b=>{a.value.delete(b)}}}function h(e,a={}){const{typeProps:c={}}=e;return{...a,...c}}function l(...e){return e.find(a=>a!==void 0)}const d={input:{component:"el-input",props:e=>{const a=h(e);return{...a,readonly:l(a.readonly,a.readOnly,e.readonly,e.readOnly),autofocus:l(a.autofocus,a.autoFocus,e.autofocus,e.autoFocus),maxlength:l(a.maxlength,a.maxLength,e.maxlength,e.maxLength),clearable:l(a.clearable,a.allowClear,e.clearable,e.allowClear),placeholder:l(a.placeholder,e.placeholder),disabled:l(a.disabled,e.disabled),type:l(a.type,e.type==="textarea"?"textarea":"text"),rows:l(a.rows,e.rows,3)}}},textarea:{component:"el-input",props:e=>{const a=h(e);return{...a,readonly:l(a.readonly,a.readOnly,e.readonly,e.readOnly),placeholder:l(a.placeholder,e.placeholder),disabled:l(a.disabled,e.disabled),type:"textarea",rows:l(a.rows,e.rows,3)}}},select:{component:"el-select",props:e=>{const a=h(e),c=l(a.multiple,a.mode==="multiple");return{...a,disabled:l(a.disabled,e.disabled),placeholder:l(a.placeholder,e.placeholder),size:l(a.size,e.size),multiple:c??!1,filterable:l(a.filterable,a.showSearch,e.filterable,e.showSearch,!1),filterMethod:l(a.filterMethod,a.filterOption,e.filterMethod,e.filterOption),popperClass:l(a.popperClass,a.dropdownClassName,e.popperClass,e.dropdownClassName),noMatchText:l(a.noMatchText,a.notFoundContent,e.noMatchText,e.notFoundContent,"无匹配数据"),collapseTags:l(a.collapseTags,a.maxTagCount,e.collapseTags,e.maxTagCount),loading:l(a.loading,e.loading,!1),allowCreate:l(a.allowCreate,a.mode==="tags")??!1,clearable:l(a.clearable,a.allowClear,e.clearable,e.allowClear,!1)}},optionsComponent:"el-option",optionProps:e=>({label:e.label,value:e.value,...e.props||{}})},"select-v2":{component:"el-select-v2",props:e=>{const a=h(e);return{...a,disabled:l(a.disabled,e.disabled),placeholder:l(a.placeholder,e.placeholder),size:l(a.size,e.size),multiple:l(a.multiple,e.multiple,!1),filterable:l(a.filterable,a.showSearch,e.filterable,e.showSearch,!1),clearable:l(a.clearable,a.allowClear,e.clearable,e.allowClear,!1)}},optionsComponent:"el-option",optionProps:e=>({label:e.label,value:e.value,...e.props||{}})},radio:{component:"el-radio-group",optionsComponent:"el-radio",optionProps:e=>({label:e.value,...e.props||{}})},checkbox:{component:"el-checkbox-group",optionsComponent:"el-checkbox",optionProps:e=>({label:e.value,...e.props||{}})},date:{component:"el-date-picker",props:e=>{const a=h(e);return{...a,type:l(a.type,a.dateType,e.dateType,"date"),placeholder:l(a.placeholder,e.placeholder),disabled:l(a.disabled,e.disabled),format:l(a.format,e.format,"YYYY-MM-DD"),valueFormat:l(a.valueFormat,e.valueFormat,"YYYY-MM-DD")}}},time:{component:"el-time-picker",props:e=>{const a=h(e);return{...a,placeholder:l(a.placeholder,e.placeholder),disabled:l(a.disabled,e.disabled),format:l(a.format,e.format,"HH:mm:ss"),valueFormat:l(a.valueFormat,e.valueFormat,"HH:mm:ss")}}},switch:{component:"el-switch",props:e=>{const a=h(e);return{...a,activeText:l(a.activeText,a.checkedChildren,e.activeText),inactiveText:l(a.inactiveText,a.unCheckedChildren,e.inactiveText),disabled:l(a.disabled,e.disabled)}}},slider:{component:"el-slider",props:e=>{const a=h(e);return{...a,disabled:l(a.disabled,e.disabled),min:l(a.min,e.min,0),max:l(a.max,e.max,100),step:l(a.step,e.step,1),showInput:l(a.showInput,e.showInput,!1)}}},mention:{component:"el-mention",props:e=>{const a=h(e);return{...a,placeholder:l(a.placeholder,e.placeholder),disabled:l(a.disabled,e.disabled)}}},"input-number":{component:"el-input-number",props:e=>{const a=h(e);return{...a,disabled:l(a.disabled,e.disabled),min:l(a.min,e.min,0),max:l(a.max,e.max,100),step:l(a.step,e.step,1)}}},cascader:{component:"el-cascader",props:e=>{const a=h(e);return{...a,disabled:l(a.disabled,e.disabled),placeholder:l(a.placeholder,e.placeholder),clearable:l(a.clearable,a.allowClear,e.clearable,e.allowClear,!1)}}},"tree-select":{component:"el-tree-select",props:e=>{const a=h(e);return{...a,disabled:l(a.disabled,e.disabled),placeholder:l(a.placeholder,e.placeholder),clearable:l(a.clearable,a.allowClear,e.clearable,e.allowClear,!1)}}},upload:{component:"el-upload",props:e=>{const a=h(e);return{...a,disabled:l(a.disabled,e.disabled)}}},rate:{component:"el-rate",props:e=>{const a=h(e);return{...a,disabled:l(a.disabled,e.disabled),max:l(a.max,e.max,5)}}},"color-picker":{component:"el-color-picker",props:e=>{const a=h(e);return{...a,disabled:l(a.disabled,e.disabled)}}},transfer:{component:"el-transfer",props:e=>{const a=h(e);return{...a,disabled:l(a.disabled,e.disabled)}}},autocomplete:{component:"el-autocomplete",props:e=>{const a=h(e);return{...a,readonly:l(a.readonly,a.readOnly,e.readonly,e.readOnly),placeholder:l(a.placeholder,e.placeholder),disabled:l(a.disabled,e.disabled),clearable:l(a.clearable,a.allowClear,e.clearable,e.allowClear,!1)}}}},le={input:d.input.component,textarea:d.textarea.component,select:d.select.component,"select-v2":d["select-v2"].component,radio:d.radio.component,checkbox:d.checkbox.component,date:d.date.component,time:d.time.component,switch:d.switch.component,slider:d.slider.component,mention:d.mention.component,"input-number":d["input-number"].component,cascader:d.cascader.component,"tree-select":d["tree-select"].component,upload:d.upload.component,rate:d.rate.component,"color-picker":d["color-picker"].component,transfer:d.transfer.component,autocomplete:d.autocomplete.component},te={select:d.select.optionsComponent,"select-v2":d["select-v2"].optionsComponent,radio:d.radio.optionsComponent,checkbox:d.checkbox.optionsComponent};function oe(e){return e==="select"||e==="select-v2"||e==="radio"||e==="checkbox"}function re(e){const a=d[e.type];if(a&&typeof a.props=="function")return typeof a.props=="function"?a.props(e):{};const{name:c,label:x,rules:u,span:w,options:_,type:b,...o}=e;return{...o,...b==="textarea"?{type:"textarea"}:{}}}const se=L({__name:"Form",props:{onSubmit:{type:Function},onFinish:{type:Function},onFinishFailed:{type:Function},onValidate:{type:Function},adapter:{},model:{},rules:{},fields:{},itemSpan:{}},setup(e,{expose:a}){const c=e,x=W(),{model:u,fields:w,rules:_,itemSpan:b}=c,o=U(null),I=S(()=>Object.assign({},x,c));return a({validate(r){return o.value?.validate(r)},validateField(r,F){return o.value?.validateField(r,F)},resetFields(){o.value?.resetFields()},scrollToField(r){o.value?.scrollToField(r)},clearValidate(r){o.value?.clearValidate(r)},fields(){return o.value?.fields},getField(r){return o.value?.getField(r)},setInitialValues(r){o.value?.setInitialValues(r)}}),(r,F)=>{const m=k("el-form-item"),P=k("el-col"),V=k("el-row"),f=k("el-form");return y(),T(f,$({ref_key:"formRef",ref:o},I.value,{class:"smart-form-element"}),{default:C(()=>[M(V,{gutter:20},{default:C(()=>[n(w)?.length?(y(!0),D(A,{key:0},Y(n(w),i=>(y(),T(P,{key:i.name,span:i.span??n(b)??24},{default:C(()=>[M(m,{label:i.label,prop:i.name,rules:i.rules??n(_)?.[i.name]},{default:C(()=>[z(r.$slots,i.name,{field:i,model:n(u)},()=>[(y(),T(R(n(le)[i.type]),$({modelValue:n(u)[i.name],"onUpdate:modelValue":s=>n(u)[i.name]=s},{ref_for:!0},n(re)(i)),{default:C(()=>[n(oe)(i.type)?(y(!0),D(A,{key:0},Y(i.options??[],s=>(y(),T(R(n(te)[i.type]),{key:s.value,label:s.label,value:s.value,"popper-append-to-body":!1},null,8,["label","value"]))),128)):N("",!0)]),_:2},1040,["modelValue","onUpdate:modelValue"]))],!0)]),_:2},1032,["label","prop","rules"])]),_:2},1032,["span"]))),128)):N("",!0),M(P,{span:24},{default:C(()=>[z(r.$slots,"default",{},void 0,!0)]),_:3})]),_:3})]),_:3},16)}}}),ne=H(se,[["__scopeId","data-v-0539fc44"]]);function v(e,a={}){const{typeProps:c={}}=e;return{...a,...c}}function t(...e){return e.find(a=>a!==void 0)}const p={input:{component:"a-input",props:e=>{const a=v(e);return{...a,readOnly:t(a.readOnly,a.readonly,e.readOnly,e.readonly),autoFocus:t(a.autoFocus,a.autofocus,e.autoFocus,e.autofocus),maxLength:t(a.maxLength,a.maxlength,e.maxLength,e.maxlength),allowClear:t(a.allowClear,a.clearable,e.allowClear,e.clearable),placeholder:t(a.placeholder,e.placeholder),disabled:t(a.disabled,e.disabled)}}},textarea:{component:"a-textarea",props:e=>{const a=v(e);return{...a,readOnly:t(a.readOnly,a.readonly,e.readOnly,e.readonly),placeholder:t(a.placeholder,e.placeholder),disabled:t(a.disabled,e.disabled),rows:t(a.rows,e.rows,3)}}},select:{component:"a-select",props:e=>{const a=v(e);return{...a,showSearch:t(a.showSearch,a.filterable,e.showSearch,e.filterable,!1),filterOption:t(a.filterOption,a.filterMethod,e.filterOption,e.filterMethod),dropdownClassName:t(a.dropdownClassName,a.popperClass,e.dropdownClassName,e.popperClass),notFoundContent:t(a.notFoundContent,a.noMatchText,e.notFoundContent,e.noMatchText,"无匹配数据"),maxTagCount:t(a.maxTagCount,a.collapseTags,e.maxTagCount,e.collapseTags),allowClear:t(a.allowClear,a.clearable,e.allowClear,e.clearable,!1),disabled:t(a.disabled,e.disabled),placeholder:t(a.placeholder,e.placeholder),mode:t(a.mode,e.mode),size:t(a.size,e.size),loading:t(a.loading,e.loading,!1)}},optionsComponent:"a-select-option",optionProps:e=>({value:e.value,...e.props||{}})},"select-v2":{component:"a-select",props:e=>{const a=v(e);return{...a,showSearch:t(a.showSearch,a.filterable,e.showSearch,e.filterable,!1),allowClear:t(a.allowClear,a.clearable,e.allowClear,e.clearable,!1),disabled:t(a.disabled,e.disabled),placeholder:t(a.placeholder,e.placeholder),mode:t(a.mode,e.mode),size:t(a.size,e.size)}},optionsComponent:"a-select-option",optionProps:e=>({value:e.value,...e.props||{}})},radio:{component:"a-radio-group",optionsComponent:"a-radio",optionProps:e=>({value:e.value,...e.props||{}})},checkbox:{component:"a-checkbox-group",optionsComponent:"a-checkbox",optionProps:e=>({value:e.value,...e.props||{}})},date:{component:"a-date-picker",props:e=>{const a=v(e);return{...a,picker:t(a.picker,a.dateType,e.dateType,"date"),placeholder:t(a.placeholder,e.placeholder),disabled:t(a.disabled,e.disabled),format:t(a.format,e.format,"YYYY-MM-DD")}}},time:{component:"a-time-picker",props:e=>{const a=v(e);return{...a,placeholder:t(a.placeholder,e.placeholder),disabled:t(a.disabled,e.disabled),format:t(a.format,e.format,"HH:mm:ss")}}},switch:{component:"a-switch",props:e=>{const a=v(e);return{...a,checkedChildren:t(a.checkedChildren,a.activeText,e.activeText),unCheckedChildren:t(a.unCheckedChildren,a.inactiveText,e.inactiveText),disabled:t(a.disabled,e.disabled)}}},slider:{component:"a-slider",props:e=>{const a=v(e);return{...a,disabled:t(a.disabled,e.disabled),min:t(a.min,e.min,0),max:t(a.max,e.max,100),step:t(a.step,e.step,1),showInput:t(a.showInput,e.showInput,!1)}}},mention:{component:"a-mentions",props:e=>{const a=v(e);return{...a,placeholder:t(a.placeholder,e.placeholder),disabled:t(a.disabled,e.disabled)}}},"input-number":{component:"a-input-number",props:e=>{const a=v(e);return{...a,disabled:t(a.disabled,e.disabled),min:t(a.min,e.min,0),max:t(a.max,e.max,100),step:t(a.step,e.step,1)}}},cascader:{component:"a-cascader",props:e=>{const a=v(e);return{...a,disabled:t(a.disabled,e.disabled),placeholder:t(a.placeholder,e.placeholder),allowClear:t(a.allowClear,a.clearable,e.allowClear,e.clearable,!1)}}},"tree-select":{component:"a-tree-select",props:e=>{const a=v(e);return{...a,disabled:t(a.disabled,e.disabled),placeholder:t(a.placeholder,e.placeholder),allowClear:t(a.allowClear,a.clearable,e.allowClear,e.clearable,!1)}}},upload:{component:"a-upload",props:e=>{const a=v(e);return{...a,disabled:t(a.disabled,e.disabled)}}},rate:{component:"a-rate",props:e=>{const a=v(e);return{...a,disabled:t(a.disabled,e.disabled),max:t(a.max,e.max,5)}}},"color-picker":{component:"a-color-picker",props:e=>{const a=v(e);return{...a,disabled:t(a.disabled,e.disabled)}}},transfer:{component:"a-transfer",props:e=>{const a=v(e);return{...a,disabled:t(a.disabled,e.disabled)}}},autocomplete:{component:"a-auto-complete",props:e=>{const a=v(e);return{...a,readOnly:t(a.readOnly,a.readonly,e.readOnly,e.readonly),placeholder:t(a.placeholder,e.placeholder),disabled:t(a.disabled,e.disabled),allowClear:t(a.allowClear,a.clearable,e.allowClear,e.clearable,!1)}}}},de={input:p.input.component,textarea:p.textarea.component,select:p.select.component,"select-v2":p["select-v2"].component,radio:p.radio.component,checkbox:p.checkbox.component,date:p.date.component,time:p.time.component,switch:p.switch.component,slider:p.slider.component,mention:p.mention.component,"input-number":p["input-number"].component,cascader:p.cascader.component,"tree-select":p["tree-select"].component,upload:p.upload.component,rate:p.rate.component,"color-picker":p["color-picker"].component,transfer:p.transfer.component,autocomplete:p.autocomplete.component},pe={select:p.select.optionsComponent,"select-v2":p["select-v2"].optionsComponent,radio:p.radio.optionsComponent,checkbox:p.checkbox.optionsComponent};function me(e){return e==="select"||e==="select-v2"||e==="radio"||e==="checkbox"}function B(e){const a=p[e.type];if(a&&typeof a.props=="function")return typeof a.props=="function"?a.props(e):{};const{name:c,label:x,rules:u,span:w,options:_,type:b,...o}=e;return o}const ce=L({__name:"Form",props:{onSubmit:{type:Function},onFinish:{type:Function},onFinishFailed:{type:Function},onValidate:{type:Function},adapter:{},model:{},rules:{},fields:{},itemSpan:{}},setup(e,{expose:a}){const c=e,x=W(),{model:u,fields:w,rules:_,itemSpan:b}=c,o=U(null),I=S(()=>Object.assign({},x,c));return a({async validate(){try{return await o.value?.validateFields(),!0}catch{return!1}},async validateField(r){try{return await o.value?.validateFields([r]),!0}catch{return!1}},resetFields(){o.value?.resetFields()},scrollToField(r){o.value?.scrollToField(r)},clearValidate(r){o.value?.clearValidate(r)}}),(r,F)=>{const m=k("a-switch"),P=k("a-form-item"),V=k("a-col"),f=k("a-row"),i=k("a-form");return y(),T(i,$({ref_key:"formRef",ref:o},I.value,{class:"smart-form-ant"}),{default:C(()=>[M(f,null,{default:C(()=>[n(w)?.length?(y(!0),D(A,{key:0},Y(n(w),s=>(y(),T(V,{key:s.name,span:s.span??n(b)??24},{default:C(()=>[M(P,{label:s.label,name:s.name,rules:s.rules??n(_)?.[s.name]},{default:C(()=>[z(r.$slots,s.name,{field:s,model:n(u)},()=>[s.type==="switch"?(y(),T(m,$({key:0,checked:n(u)[s.name],"onUpdate:checked":O=>n(u)[s.name]=O},{ref_for:!0},n(B)(s)),null,16,["checked","onUpdate:checked"])):(y(),T(R(n(de)[s.type]),$({key:1,value:n(u)[s.name],"onUpdate:value":O=>n(u)[s.name]=O},{ref_for:!0},n(B)(s)),{default:C(()=>[n(me)(s.type)?(y(!0),D(A,{key:0},Y(s.options??[],O=>(y(),T(R(n(pe)[s.type]),{key:O.value,value:O.value},{default:C(()=>[G(K(O.label),1)]),_:2},1032,["value"]))),128)):N("",!0)]),_:2},1040,["value","onUpdate:value"]))],!0)]),_:2},1032,["label","name","rules"])]),_:2},1032,["span"]))),128)):N("",!0),M(V,{span:24},{default:C(()=>[z(r.$slots,"default",{},void 0,!0)]),_:3})]),_:3})]),_:3},16)}}}),ue=H(ce,[["__scopeId","data-v-1aad5f48"]]),ie={name:"SmartForm"},be=L({...ie,props:{onSubmit:{},onFinish:{},onFinishFailed:{},onValidate:{},adapter:{default:void 0},model:{default:()=>({})},rules:{},fields:{default:()=>[]},itemSpan:{}},setup(e,{expose:a}){const c=e,x=W(),u=S(()=>E(c.adapter)),{formProps:w,registerField:_,unregisterField:b}=ae(Object.assign({},c,x)),o=U(null),I=S(()=>u.value==="ant"?ue:ne),r=S(()=>Object.assign({},w.value,{class:"smart-form"}));function F(m,...P){return o.value?.[m]?.(...P)}return a({registerField:_,unregisterField:b,validate:(...m)=>F("validate",...m),validateField:(...m)=>F("validateField",...m),resetFields:(...m)=>F("resetFields",...m),scrollToField:(...m)=>F("scrollToField",...m),clearValidate:(...m)=>F("clearValidate",...m),fields:()=>u.value==="element"?F("fields"):void 0,getField:m=>u.value==="element"?F("getField",m):void 0,setInitialValues:m=>u.value==="element"?F("setInitialValues",m):void 0}),(m,P)=>(y(),T(R(I.value),$({ref_key:"formRef",ref:o},r.value),Q({default:C(()=>[z(m.$slots,"default",{},void 0,!0)]),_:2},[Y(m.$slots,(V,f)=>({name:f,fn:C(i=>[z(m.$slots,f,X(Z(i)),void 0,!0)])}))]),1040))}}),he=H(be,[["__scopeId","data-v-60359023"]]),ve={components:{SmartForm:he},props:{adapter:{type:String,default:"element"}},data(){return{formData:{username:"",email:"",password:"",gender:"",hobbies:[]},formFields:[{name:"username",label:"用户名",type:"input",placeholder:"请输入用户名"},{name:"email",label:"邮箱",type:"input",placeholder:"请输入邮箱"},{name:"password",label:"密码",type:"input",placeholder:"请输入密码",inputType:"password"},{name:"gender",label:"性别",type:"radio",options:[{label:"男",value:"male"},{label:"女",value:"female"}]},{name:"hobbies",label:"爱好",type:"checkbox",options:[{label:"阅读",value:"reading"},{label:"运动",value:"sports"},{label:"音乐",value:"music"},{label:"旅行",value:"travel"}]}],formRules:{username:[{required:!0,message:"请输入用户名",trigger:"blur"},{min:3,max:20,message:"长度在 3 到 20 个字符",trigger:"blur"}],email:[{required:!0,message:"请输入邮箱",trigger:"blur"},{type:"email",message:"请输入有效的邮箱地址",trigger:"blur"}]}}},methods:{handleFormSubmit(e,a){alert(e?"表单提交成功！提交的数据："+JSON.stringify(a,null,2):"表单验证失败，请检查必填项！")},handleFormReset(){this.formData={username:"",email:"",password:"",gender:"",hobbies:[]}}}},ye={class:"form-demo-container"};function Ce(e,a,c,x,u,w){const _=k("smart-form");return y(),D("div",ye,[a[0]||(a[0]=j("div",{class:"form-demo-gradient-bar"},null,-1)),a[1]||(a[1]=j("h3",{class:"form-demo-title"},"智能表单生成",-1)),M(_,{model:u.formData,fields:u.formFields,rules:u.formRules,adapter:c.adapter,"label-width":"120px","submit-button":{text:"提交表单",type:"primary",size:"medium"},"cancel-button":{text:"重置表单",size:"medium"},onSubmit:w.handleFormSubmit,onCancel:w.handleFormReset},null,8,["model","fields","rules","adapter","onSubmit","onCancel"])])}const Fe=H(ve,[["render",Ce],["__scopeId","data-v-64a0f5cd"]]);export{Fe as default};
