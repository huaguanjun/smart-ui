import{p as F,r as z}from"./utils-CiEdCm-o.js";import{g as h,k as u,f as w,r as v,i as _,o as g,w as p,c as y,n as x,F as k,m as D,e as R,t as I,q as P,_ as C,x as A,y as T,l as j,p as O,b as m,d as K}from"./app-ky5rt28X.js";function E(e,o,n){if(!n)return e;const i=[...e],t=(a,l)=>{const r=a[o],c=l[o];return r===c?0:r==null?1:c==null?-1:typeof r=="string"&&typeof c=="string"?n==="ascending"?r.localeCompare(c):c.localeCompare(r):n==="ascending"?r>c?1:-1:r<c?1:-1};return i.sort(t)}function V(e,o){return!o||Object.keys(o).length===0?e:e.filter(n=>Object.entries(o).every(([i,t])=>{if(t==null||t==="")return!0;const a=n[i];return Array.isArray(t)?t.includes(a):String(a).toLowerCase().includes(String(t).toLowerCase())}))}function $(e,o){const{currentPage:n,pageSize:i}=o,t=(n-1)*i,a=t+i;return e.slice(t,a)}function L(e){const o=h(!1),n=h({currentPage:typeof e.pagination=="object"&&e.pagination?.currentPage?e.pagination.currentPage:1,pageSize:typeof e.pagination=="object"&&e.pagination?.pageSize?e.pagination.pageSize:10,total:typeof e.pagination=="object"&&e.pagination?.total?e.pagination.total:e.data?.length||0}),i=h({column:void 0,order:null}),t=h({}),a=u(()=>{let s=[...e.data];return e.localFilter&&Object.keys(t.value).length>0&&(s=V(s,t.value)),e.localSort&&i.value.column&&i.value.order&&(s=E(s,i.value.column,i.value.order)),(e.localPagination||e.localFilter||e.localSort)&&(n.value.total=s.length),e.localPagination&&(s=$(s,n.value)),s}),l=u(()=>F(e.columns)),r=u(()=>e.pagination?typeof e.pagination=="boolean"?{current:n.value.currentPage,pageSize:n.value.pageSize,total:n.value.total,showSizeChanger:!0,pageSizeOptions:["10","20","50","100"]}:{...e.pagination,current:n.value.currentPage,pageSize:n.value.pageSize,total:n.value.total}:!1),c=u(()=>({border:e.border,size:e.size,stripe:e.stripe,highlightCurrentRow:e.highlightCurrentRow})),d=u(()=>{const s=["onSort","onFilter","onPaginationChange","onReload","data","columns"];return Object.fromEntries(Object.entries(e).filter(([b])=>!s.includes(b)))}),f=u(()=>({data:e.localSort||e.localFilter||e.localPagination?a.value:e.data,columns:l.value,loading:e.loading||o.value,...c.value,pagination:r.value,rowKey:e.rowKey,...d.value})),S=()=>{};return{tableProps:f,refresh:S,reload:async()=>{o.value=!0;try{e.onReload?await e.onReload():S()}finally{o.value=!1}},sort:(s,b)=>{if(i.value={column:s,order:b},!e.localSort&&e.onSort)e.onSort(i.value);else try{const B=typeof process<"u"&&!1||typeof import.meta<"u"&&!1}catch{}},filter:s=>{if(t.value={...s},n.value.currentPage=1,!e.localFilter&&e.onFilter)e.onFilter(t.value);else try{const b=typeof process<"u"&&!1||typeof import.meta<"u"&&!1}catch{}},paginationState:n,sortState:i,filterState:t,setPagination:s=>{n.value={...n.value,...s},!e.localPagination&&e.onPaginationChange&&e.onPaginationChange(n.value)}}}const N=w({__name:"Table",props:{adapter:{},data:{},columns:{},loading:{type:Boolean},pagination:{type:[Boolean,Object]},border:{type:Boolean},size:{},stripe:{type:Boolean},highlightCurrentRow:{type:Boolean},rowKey:{type:[String,Function]},onSort:{type:Function},onFilter:{type:Function},onPaginationChange:{type:Function},onReload:{type:Function},localSort:{type:Boolean},localFilter:{type:Boolean},localPagination:{type:Boolean}},setup(e){const o=e,n=u(()=>o.columns?o.columns.map(a=>{const l=a.prop??a.dataIndex??"";return{...a,prop:l,key:l}}):[]);function i(a,l){const r=l.row[a.prop];return typeof a.formatter=="function"?a.formatter(l.row,l.column,r,l.$index):r}const t=u(()=>{const{columns:a,...l}=o;return l});return(a,l)=>{const r=v("el-table-column"),c=v("el-table");return g(),_(c,P(t.value,{class:"smart-table-element"}),{default:p(()=>[(g(!0),y(k,null,D(n.value,d=>(g(),_(r,{key:d.key,prop:d.prop,label:d.label,width:d.width,"min-width":d.minWidth,align:d.align,sortable:d.sortable,fixed:d.fixed},{default:p(f=>[R(I(i(d,f)),1)]),_:2},1032,["prop","label","width","min-width","align","sortable","fixed"]))),128)),x(a.$slots,"default",{},void 0,!0)]),_:3},16)}}}),W=C(N,[["__scopeId","data-v-392345ff"]]),q=w({__name:"Table",props:{adapter:{},data:{},columns:{},loading:{type:Boolean},pagination:{type:[Boolean,Object]},border:{type:Boolean},size:{},stripe:{type:Boolean},highlightCurrentRow:{type:Boolean},rowKey:{type:[String,Function]},onSort:{type:Function},onFilter:{type:Function},onPaginationChange:{type:Function},onReload:{type:Function},localSort:{type:Boolean},localFilter:{type:Boolean},localPagination:{type:Boolean}},setup(e){const o=e,n=u(()=>o.columns?o.columns.map(t=>{const a=t.dataIndex??t.prop;return{title:t.label,dataIndex:a,key:a,width:t.width,align:t.align,fixed:t.fixed,sorter:t.sortable,customRender:t.formatter?l=>t.formatter(l.record,{dataIndex:a},l.text,l.index):void 0}}):[]),i=u(()=>{const{data:t,columns:a,rowKey:l,...r}=o;return{...r,columns:n.value,dataSource:t,rowKey:l??"id"}});return(t,a)=>{const l=v("a-table");return g(),_(l,P(i.value,{class:"smart-table-ant"}),{default:p(()=>[x(t.$slots,"default",{},void 0,!0)]),_:3},16)}}}),G=C(q,[["__scopeId","data-v-4d753686"]]),H={name:"SmartTable"},J=w({...H,props:{adapter:{default:void 0},data:{default:()=>[]},columns:{default:()=>[]},loading:{type:Boolean},pagination:{type:[Boolean,Object]},border:{type:Boolean},size:{},stripe:{type:Boolean},highlightCurrentRow:{type:Boolean},rowKey:{},onSort:{},onFilter:{},onPaginationChange:{},onReload:{},localSort:{type:Boolean},localFilter:{type:Boolean},localPagination:{type:Boolean}},setup(e,{expose:o}){const n=e,i=u(()=>z(n.adapter)),{tableProps:t,refresh:a,reload:l,sort:r,filter:c}=L(n),d=u(()=>i.value==="ant"?G:W);return o({refresh:a,reload:l,sort:r,filter:c}),(f,S)=>(g(),_(O(d.value),A(T(j(t))),{default:p(()=>[x(f.$slots,"default",{},void 0,!0)]),_:3},16))}}),M=C(J,[["__scopeId","data-v-ef74d63f"]]),Q={components:{SmartTable:M},props:{adapter:{type:String,default:"element"}},data(){return{tableData:[{id:1,name:"张三",age:25,email:"zhangsan@example.com",gender:"male",status:"active",createdAt:"2023-01-01"},{id:2,name:"李四",age:30,email:"lisi@example.com",gender:"male",status:"active",createdAt:"2023-02-01"},{id:3,name:"王五",age:28,email:"wangwu@example.com",gender:"female",status:"inactive",createdAt:"2023-03-01"},{id:4,name:"赵六",age:35,email:"zhaoliu@example.com",gender:"male",status:"active",createdAt:"2023-04-01"},{id:5,name:"孙七",age:22,email:"sunqi@example.com",gender:"female",status:"active",createdAt:"2023-05-01"},{id:6,name:"周八",age:29,email:"zhouba@example.com",gender:"male",status:"inactive",createdAt:"2023-06-01"},{id:7,name:"吴九",age:32,email:"wujiu@example.com",gender:"female",status:"active",createdAt:"2023-07-01"},{id:8,name:"郑十",age:26,email:"zhengshi@example.com",gender:"male",status:"active",createdAt:"2023-08-01"}],tableColumns:[{prop:"id",dataIndex:"id",label:"ID",width:80,align:"center",sortable:!0},{prop:"name",dataIndex:"name",label:"姓名",width:120},{prop:"age",dataIndex:"age",label:"年龄",width:80,align:"center",sortable:!0},{prop:"email",dataIndex:"email",label:"邮箱",minWidth:200},{prop:"gender",dataIndex:"gender",label:"性别",width:80,align:"center",formatter:e=>e.gender==="male"?"男":"女"},{prop:"status",dataIndex:"status",label:"状态",width:100,align:"center",slot:"status"},{prop:"createdAt",dataIndex:"createdAt",label:"创建时间",minWidth:150,align:"center",sortable:!0},{prop:"action",dataIndex:"action",label:"操作",width:120,align:"center",slot:"action"}]}},methods:{handleTableSelectionChange(e){console.log("选择变化:",e)},handleTableSortChange(e){console.log("排序变化:",e)},handleTableRowClick(e,o,n){console.log("行点击:",e,o,n)},handleEdit(e){alert(`编辑用户: ${e.name}`)},handleDelete(e){alert(`删除用户: ${e.name}`)}}},U={class:"table-demo-container"},X={key:0,class:"status-badge status-active"},Y={key:1,class:"status-badge status-inactive"},Z={class:"action-buttons"},ee=["onClick"],te=["onClick"];function ae(e,o,n,i,t,a){const l=v("smart-table");return g(),y("div",U,[o[0]||(o[0]=m("div",{class:"table-demo-gradient-bar"},null,-1)),o[1]||(o[1]=m("h3",{class:"table-demo-title"},"智能表格生成",-1)),o[2]||(o[2]=m("p",{class:"table-demo-description"},"通过配置生成功能完整的表格，支持分页、选择、排序等高级功能。",-1)),K(l,{data:t.tableData,columns:t.tableColumns,adapter:n.adapter,border:"",stripe:"","highlight-current-row":"",pagination:{pageSize:5,total:t.tableData.length},"row-selection":{type:"checkbox",onChange:a.handleTableSelectionChange},onSortChange:a.handleTableSortChange,onRowClick:a.handleTableRowClick},{status:p(({row:r})=>[r.status==="active"?(g(),y("span",X,"活跃")):(g(),y("span",Y,"禁用"))]),action:p(({row:r})=>[m("div",Z,[m("button",{onClick:c=>a.handleEdit(r),class:"btn-edit"},"编辑",8,ee),m("button",{onClick:c=>a.handleDelete(r),class:"btn-delete"},"删除",8,te)])]),_:1},8,["data","columns","adapter","pagination","row-selection","onSortChange","onRowClick"])])}const ce=C(Q,[["render",ae],["__scopeId","data-v-e0ed41e6"]]);export{ce as default};
