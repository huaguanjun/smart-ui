import{f as j,u as G,k as x,g as T,i as O,o as w,s as se,m as N,w as F,n as R,x as ee,y as ae,q as E,p as U,r as $,d as M,c as A,j as K,l as h,F as W,e as te,t as J,B as le,C as de,b as D,A as X,_ as ie}from"./app-BdW5a743.js";var H={};let ue={adapter:"element"};function pe(){return ue}function ce(e){var a,s;let m=!1;try{m=typeof process<"u"&&((a=H)==null?void 0:a.NODE_ENV)==="development"||typeof import.meta<"u"&&((s={BASE_URL:"/",MODE:"production",DEV:!1,PROD:!0,SSR:!1})==null?void 0:s.DEV)}catch{}return Array.isArray(e)?e.map((n,d)=>{if(!n||typeof n!="object")return m&&console.warn(`Invalid column configuration at index ${d}, expected an object`),{label:"Invalid Column",prop:`invalid_${d}`};n.label||(m&&console.warn(`Column at index ${d} is missing label, using default label`),n.label=`Column ${d+1}`);const l={...n};return!l.dataIndex&&l.prop&&(l.dataIndex=l.prop),!l.prop&&l.dataIndex&&(l.prop=l.dataIndex),!l.prop&&!l.dataIndex&&(l.prop=`column_${d}`,l.dataIndex=`column_${d}`),l}):(m&&console.warn("Invalid columns configuration, expected an array"),[])}function oe(e){return e==="element"}function ne(e){return e==="ant"}function Q(e){return e||pe().adapter}function me(e){var a,s,m;const n={...e};if(e.labelWidth&&!((s=(a=e.labelCol)==null?void 0:a.style)!=null&&s.width)){const d=typeof e.labelWidth=="number"?`${e.labelWidth}px`:e.labelWidth;n.labelCol={...e.labelCol,style:{...(m=e.labelCol)==null?void 0:m.style,width:d}}}return n}function be(e,a){return a&&(oe(e)&&a==="middle"?"default":ne(e)&&a==="default"?"middle":a)}function ve(e){const a=T(new Map),s=x(()=>Q(e.adapter)),m=x(()=>({model:e.model,rules:e.rules,fields:e.fields,inline:e.inline,disabled:e.disabled}));return{formProps:x(()=>{const u=s.value,i=be(u,e.size);return oe(u)?{...e,...m.value,size:i,labelWidth:e.labelWidth,labelPosition:e.labelPosition}:ne(u)?me({...e,...m.value,size:i}):{...e,...m.value,size:i}}),registerField:u=>{u?.name&&a.value.set(u.name,u)},unregisterField:u=>{a.value.delete(u)}}}function S(e,a={}){const{typeProps:s={}}=e;return{...a,...s}}function o(...e){return e.find(a=>a!==void 0)}const y={input:{component:"el-input",props:e=>{const a=S(e);return{...a,readonly:o(a.readonly,a.readOnly,e.readonly,e.readOnly),autofocus:o(a.autofocus,a.autoFocus,e.autofocus,e.autoFocus),maxlength:o(a.maxlength,a.maxLength,e.maxlength,e.maxLength),clearable:o(a.clearable,a.allowClear,e.clearable,e.allowClear),placeholder:o(a.placeholder,e.placeholder),disabled:o(a.disabled,e.disabled),type:o(a.type,e.type==="textarea"?"textarea":"text"),rows:o(a.rows,e.rows,3)}}},textarea:{component:"el-input",props:e=>{const a=S(e);return{...a,readonly:o(a.readonly,a.readOnly,e.readonly,e.readOnly),placeholder:o(a.placeholder,e.placeholder),disabled:o(a.disabled,e.disabled),type:"textarea",rows:o(a.rows,e.rows,3)}}},select:{component:"el-select",props:e=>{const a=S(e),s=o(a.multiple,a.mode==="multiple");return{...a,disabled:o(a.disabled,e.disabled),placeholder:o(a.placeholder,e.placeholder),size:o(a.size,e.size),multiple:s??!1,filterable:o(a.filterable,a.showSearch,e.filterable,e.showSearch,!1),filterMethod:o(a.filterMethod,a.filterOption,e.filterMethod,e.filterOption),popperClass:o(a.popperClass,a.dropdownClassName,e.popperClass,e.dropdownClassName),noMatchText:o(a.noMatchText,a.notFoundContent,e.noMatchText,e.notFoundContent,"无匹配数据"),collapseTags:o(a.collapseTags,a.maxTagCount,e.collapseTags,e.maxTagCount),loading:o(a.loading,e.loading,!1),allowCreate:o(a.allowCreate,a.mode==="tags")??!1,clearable:o(a.clearable,a.allowClear,e.clearable,e.allowClear,!1)}},optionsComponent:"el-option",optionProps:e=>({label:e.label,value:e.value,...e.props||{}})},"select-v2":{component:"el-select-v2",props:e=>{const a=S(e);return{...a,disabled:o(a.disabled,e.disabled),placeholder:o(a.placeholder,e.placeholder),size:o(a.size,e.size),multiple:o(a.multiple,e.multiple,!1),filterable:o(a.filterable,a.showSearch,e.filterable,e.showSearch,!1),clearable:o(a.clearable,a.allowClear,e.clearable,e.allowClear,!1)}},optionsComponent:"el-option",optionProps:e=>({label:e.label,value:e.value,...e.props||{}})},radio:{component:"el-radio-group",optionsComponent:"el-radio",optionProps:e=>({label:e.value,...e.props||{}})},checkbox:{component:"el-checkbox-group",optionsComponent:"el-checkbox",optionProps:e=>({label:e.value,...e.props||{}})},date:{component:"el-date-picker",props:e=>{const a=S(e);return{...a,type:o(a.type,a.dateType,e.dateType,"date"),placeholder:o(a.placeholder,e.placeholder),disabled:o(a.disabled,e.disabled),format:o(a.format,e.format,"YYYY-MM-DD"),valueFormat:o(a.valueFormat,e.valueFormat,"YYYY-MM-DD")}}},time:{component:"el-time-picker",props:e=>{const a=S(e);return{...a,placeholder:o(a.placeholder,e.placeholder),disabled:o(a.disabled,e.disabled),format:o(a.format,e.format,"HH:mm:ss"),valueFormat:o(a.valueFormat,e.valueFormat,"HH:mm:ss")}}},switch:{component:"el-switch",props:e=>{const a=S(e);return{...a,activeText:o(a.activeText,a.checkedChildren,e.activeText),inactiveText:o(a.inactiveText,a.unCheckedChildren,e.inactiveText),disabled:o(a.disabled,e.disabled)}}},slider:{component:"el-slider",props:e=>{const a=S(e);return{...a,disabled:o(a.disabled,e.disabled),min:o(a.min,e.min,0),max:o(a.max,e.max,100),step:o(a.step,e.step,1),showInput:o(a.showInput,e.showInput,!1)}}},mention:{component:"el-mention",props:e=>{const a=S(e);return{...a,placeholder:o(a.placeholder,e.placeholder),disabled:o(a.disabled,e.disabled)}}},"input-number":{component:"el-input-number",props:e=>{const a=S(e);return{...a,disabled:o(a.disabled,e.disabled),min:o(a.min,e.min,0),max:o(a.max,e.max,100),step:o(a.step,e.step,1)}}},cascader:{component:"el-cascader",props:e=>{const a=S(e);return{...a,disabled:o(a.disabled,e.disabled),placeholder:o(a.placeholder,e.placeholder),clearable:o(a.clearable,a.allowClear,e.clearable,e.allowClear,!1)}}},"tree-select":{component:"el-tree-select",props:e=>{const a=S(e);return{...a,disabled:o(a.disabled,e.disabled),placeholder:o(a.placeholder,e.placeholder),clearable:o(a.clearable,a.allowClear,e.clearable,e.allowClear,!1)}}},upload:{component:"el-upload",props:e=>{const a=S(e);return{...a,disabled:o(a.disabled,e.disabled)}}},rate:{component:"el-rate",props:e=>{const a=S(e);return{...a,disabled:o(a.disabled,e.disabled),max:o(a.max,e.max,5)}}},"color-picker":{component:"el-color-picker",props:e=>{const a=S(e);return{...a,disabled:o(a.disabled,e.disabled)}}},transfer:{component:"el-transfer",props:e=>{const a=S(e);return{...a,disabled:o(a.disabled,e.disabled)}}},autocomplete:{component:"el-autocomplete",props:e=>{const a=S(e);return{...a,readonly:o(a.readonly,a.readOnly,e.readonly,e.readOnly),placeholder:o(a.placeholder,e.placeholder),disabled:o(a.disabled,e.disabled),clearable:o(a.clearable,a.allowClear,e.clearable,e.allowClear,!1)}}}},he={input:y.input.component,textarea:y.textarea.component,select:y.select.component,"select-v2":y["select-v2"].component,radio:y.radio.component,checkbox:y.checkbox.component,date:y.date.component,time:y.time.component,switch:y.switch.component,slider:y.slider.component,mention:y.mention.component,"input-number":y["input-number"].component,cascader:y.cascader.component,"tree-select":y["tree-select"].component,upload:y.upload.component,rate:y.rate.component,"color-picker":y["color-picker"].component,transfer:y.transfer.component,autocomplete:y.autocomplete.component},ye={select:y.select.optionsComponent,"select-v2":y["select-v2"].optionsComponent,radio:y.radio.optionsComponent,checkbox:y.checkbox.optionsComponent};function _e(e){return e==="select"||e==="select-v2"||e==="radio"||e==="checkbox"}function fe(e){const a=y[e.type];if(a&&typeof a.props=="function")return typeof a.props=="function"?a.props(e):{};const{name:s,label:m,rules:n,span:d,options:l,type:u,...i}=e;return{...i,...u==="textarea"?{type:"textarea"}:{}}}const Ce=j({__name:"Form",props:{onSubmit:{type:Function},onFinish:{type:Function},onFinishFailed:{type:Function},onValidate:{type:Function},adapter:{},model:{},rules:{},fields:{},itemSpan:{}},setup(e,{expose:a}){const s=e,m=G(),{model:n,fields:d,rules:l,itemSpan:u}=s,i=T(null),C=x(()=>Object.assign({},m,s));return a({validate(p){var c;return(c=i.value)==null?void 0:c.validate(p)},validateField(p,c){var t;return(t=i.value)==null?void 0:t.validateField(p,c)},resetFields(){var p;(p=i.value)==null||p.resetFields()},scrollToField(p){var c;(c=i.value)==null||c.scrollToField(p)},clearValidate(p){var c;(c=i.value)==null||c.clearValidate(p)},fields(){var p;return(p=i.value)==null?void 0:p.fields},getField(p){var c;return(c=i.value)==null?void 0:c.getField(p)},setInitialValues(p){var c;(c=i.value)==null||c.setInitialValues(p)}}),(p,c)=>{const t=$("el-form-item"),b=$("el-col"),P=$("el-row"),V=$("el-form");return w(),O(V,E({ref_key:"formRef",ref:i},C.value,{class:"smart-form-element"}),{default:F(()=>[M(P,{gutter:20},{default:F(()=>{var I;return[(I=h(d))!=null&&I.length?(w(!0),A(W,{key:0},N(h(d),k=>(w(),O(b,{key:k.name,span:k.span??h(u)??24},{default:F(()=>{var f;return[M(t,{label:k.label,prop:k.name,rules:k.rules??((f=h(l))==null?void 0:f[k.name])},{default:F(()=>[R(p.$slots,k.name,{field:k,model:h(n)},()=>[(w(),O(U(h(he)[k.type]),E({modelValue:h(n)[k.name],"onUpdate:modelValue":B=>h(n)[k.name]=B},{ref_for:!0},h(fe)(k)),{default:F(()=>[h(_e)(k.type)?(w(!0),A(W,{key:0},N(k.options??[],B=>(w(),O(U(h(ye)[k.type]),{key:B.value,label:B.label,value:B.value,"popper-append-to-body":!1},null,8,["label","value"]))),128)):K("",!0)]),_:2},1040,["modelValue","onUpdate:modelValue"]))],!0)]),_:2},1032,["label","prop","rules"])]}),_:2},1032,["span"]))),128)):K("",!0),M(b,{span:24},{default:F(()=>[R(p.$slots,"default",{},void 0,!0)]),_:3})]}),_:3})]),_:3},16)}}}),Y=(e,a)=>{const s=e.__vccOpts||e;for(const[m,n]of a)s[m]=n;return s},we=Y(Ce,[["__scopeId","data-v-3a05bb4f"]]);function g(e,a={}){const{typeProps:s={}}=e;return{...a,...s}}function r(...e){return e.find(a=>a!==void 0)}const _={input:{component:"a-input",props:e=>{const a=g(e);return{...a,readOnly:r(a.readOnly,a.readonly,e.readOnly,e.readonly),autoFocus:r(a.autoFocus,a.autofocus,e.autoFocus,e.autofocus),maxLength:r(a.maxLength,a.maxlength,e.maxLength,e.maxlength),allowClear:r(a.allowClear,a.clearable,e.allowClear,e.clearable),placeholder:r(a.placeholder,e.placeholder),disabled:r(a.disabled,e.disabled)}}},textarea:{component:"a-textarea",props:e=>{const a=g(e);return{...a,readOnly:r(a.readOnly,a.readonly,e.readOnly,e.readonly),placeholder:r(a.placeholder,e.placeholder),disabled:r(a.disabled,e.disabled),rows:r(a.rows,e.rows,3)}}},select:{component:"a-select",props:e=>{const a=g(e);return{...a,showSearch:r(a.showSearch,a.filterable,e.showSearch,e.filterable,!1),filterOption:r(a.filterOption,a.filterMethod,e.filterOption,e.filterMethod),dropdownClassName:r(a.dropdownClassName,a.popperClass,e.dropdownClassName,e.popperClass),notFoundContent:r(a.notFoundContent,a.noMatchText,e.notFoundContent,e.noMatchText,"无匹配数据"),maxTagCount:r(a.maxTagCount,a.collapseTags,e.maxTagCount,e.collapseTags),allowClear:r(a.allowClear,a.clearable,e.allowClear,e.clearable,!1),disabled:r(a.disabled,e.disabled),placeholder:r(a.placeholder,e.placeholder),mode:r(a.mode,e.mode),size:r(a.size,e.size),loading:r(a.loading,e.loading,!1)}},optionsComponent:"a-select-option",optionProps:e=>({value:e.value,...e.props||{}})},"select-v2":{component:"a-select",props:e=>{const a=g(e);return{...a,showSearch:r(a.showSearch,a.filterable,e.showSearch,e.filterable,!1),allowClear:r(a.allowClear,a.clearable,e.allowClear,e.clearable,!1),disabled:r(a.disabled,e.disabled),placeholder:r(a.placeholder,e.placeholder),mode:r(a.mode,e.mode),size:r(a.size,e.size)}},optionsComponent:"a-select-option",optionProps:e=>({value:e.value,...e.props||{}})},radio:{component:"a-radio-group",optionsComponent:"a-radio",optionProps:e=>({value:e.value,...e.props||{}})},checkbox:{component:"a-checkbox-group",optionsComponent:"a-checkbox",optionProps:e=>({value:e.value,...e.props||{}})},date:{component:"a-date-picker",props:e=>{const a=g(e);return{...a,picker:r(a.picker,a.dateType,e.dateType,"date"),placeholder:r(a.placeholder,e.placeholder),disabled:r(a.disabled,e.disabled),format:r(a.format,e.format,"YYYY-MM-DD")}}},time:{component:"a-time-picker",props:e=>{const a=g(e);return{...a,placeholder:r(a.placeholder,e.placeholder),disabled:r(a.disabled,e.disabled),format:r(a.format,e.format,"HH:mm:ss")}}},switch:{component:"a-switch",props:e=>{const a=g(e);return{...a,checkedChildren:r(a.checkedChildren,a.activeText,e.activeText),unCheckedChildren:r(a.unCheckedChildren,a.inactiveText,e.inactiveText),disabled:r(a.disabled,e.disabled)}}},slider:{component:"a-slider",props:e=>{const a=g(e);return{...a,disabled:r(a.disabled,e.disabled),min:r(a.min,e.min,0),max:r(a.max,e.max,100),step:r(a.step,e.step,1),showInput:r(a.showInput,e.showInput,!1)}}},mention:{component:"a-mentions",props:e=>{const a=g(e);return{...a,placeholder:r(a.placeholder,e.placeholder),disabled:r(a.disabled,e.disabled)}}},"input-number":{component:"a-input-number",props:e=>{const a=g(e);return{...a,disabled:r(a.disabled,e.disabled),min:r(a.min,e.min,0),max:r(a.max,e.max,100),step:r(a.step,e.step,1)}}},cascader:{component:"a-cascader",props:e=>{const a=g(e);return{...a,disabled:r(a.disabled,e.disabled),placeholder:r(a.placeholder,e.placeholder),allowClear:r(a.allowClear,a.clearable,e.allowClear,e.clearable,!1)}}},"tree-select":{component:"a-tree-select",props:e=>{const a=g(e);return{...a,disabled:r(a.disabled,e.disabled),placeholder:r(a.placeholder,e.placeholder),allowClear:r(a.allowClear,a.clearable,e.allowClear,e.clearable,!1)}}},upload:{component:"a-upload",props:e=>{const a=g(e);return{...a,disabled:r(a.disabled,e.disabled)}}},rate:{component:"a-rate",props:e=>{const a=g(e);return{...a,disabled:r(a.disabled,e.disabled),max:r(a.max,e.max,5)}}},"color-picker":{component:"a-color-picker",props:e=>{const a=g(e);return{...a,disabled:r(a.disabled,e.disabled)}}},transfer:{component:"a-transfer",props:e=>{const a=g(e);return{...a,disabled:r(a.disabled,e.disabled)}}},autocomplete:{component:"a-auto-complete",props:e=>{const a=g(e);return{...a,readOnly:r(a.readOnly,a.readonly,e.readOnly,e.readonly),placeholder:r(a.placeholder,e.placeholder),disabled:r(a.disabled,e.disabled),allowClear:r(a.allowClear,a.clearable,e.allowClear,e.clearable,!1)}}}},xe={input:_.input.component,textarea:_.textarea.component,select:_.select.component,"select-v2":_["select-v2"].component,radio:_.radio.component,checkbox:_.checkbox.component,date:_.date.component,time:_.time.component,switch:_.switch.component,slider:_.slider.component,mention:_.mention.component,"input-number":_["input-number"].component,cascader:_.cascader.component,"tree-select":_["tree-select"].component,upload:_.upload.component,rate:_.rate.component,"color-picker":_["color-picker"].component,transfer:_.transfer.component,autocomplete:_.autocomplete.component},Fe={select:_.select.optionsComponent,"select-v2":_["select-v2"].optionsComponent,radio:_.radio.optionsComponent,checkbox:_.checkbox.optionsComponent};function ke(e){return e==="select"||e==="select-v2"||e==="radio"||e==="checkbox"}function Z(e){const a=_[e.type];if(a&&typeof a.props=="function")return typeof a.props=="function"?a.props(e):{};const{name:s,label:m,rules:n,span:d,options:l,type:u,...i}=e;return i}const Pe=j({__name:"Form",props:{onSubmit:{type:Function},onFinish:{type:Function},onFinishFailed:{type:Function},onValidate:{type:Function},adapter:{},model:{},rules:{},fields:{},itemSpan:{}},setup(e,{expose:a}){const s=e,m=G(),{model:n,fields:d,rules:l,itemSpan:u}=s,i=T(null),C=x(()=>Object.assign({},m,s));return a({async validate(){var p;try{return await((p=i.value)==null?void 0:p.validateFields()),!0}catch{return!1}},async validateField(p){var c;try{return await((c=i.value)==null?void 0:c.validateFields([p])),!0}catch{return!1}},resetFields(){var p;(p=i.value)==null||p.resetFields()},scrollToField(p){var c;(c=i.value)==null||c.scrollToField(p)},clearValidate(p){var c;(c=i.value)==null||c.clearValidate(p)}}),(p,c)=>{const t=$("a-switch"),b=$("a-form-item"),P=$("a-col"),V=$("a-row"),I=$("a-form");return w(),O(I,E({ref_key:"formRef",ref:i},C.value,{class:"smart-form-ant"}),{default:F(()=>[M(V,null,{default:F(()=>{var k;return[(k=h(d))!=null&&k.length?(w(!0),A(W,{key:0},N(h(d),f=>(w(),O(P,{key:f.name,span:f.span??h(u)??24},{default:F(()=>{var B;return[M(b,{label:f.label,name:f.name,rules:f.rules??((B=h(l))==null?void 0:B[f.name])},{default:F(()=>[R(p.$slots,f.name,{field:f,model:h(n)},()=>[f.type==="switch"?(w(),O(t,E({key:0,checked:h(n)[f.name],"onUpdate:checked":v=>h(n)[f.name]=v},{ref_for:!0},h(Z)(f)),null,16,["checked","onUpdate:checked"])):(w(),O(U(h(xe)[f.type]),E({key:1,value:h(n)[f.name],"onUpdate:value":v=>h(n)[f.name]=v},{ref_for:!0},h(Z)(f)),{default:F(()=>[h(ke)(f.type)?(w(!0),A(W,{key:0},N(f.options??[],v=>(w(),O(U(h(Fe)[f.type]),{key:v.value,value:v.value},{default:F(()=>[te(J(v.label),1)]),_:2},1032,["value"]))),128)):K("",!0)]),_:2},1040,["value","onUpdate:value"]))],!0)]),_:2},1032,["label","name","rules"])]}),_:2},1032,["span"]))),128)):K("",!0),M(P,{span:24},{default:F(()=>[R(p.$slots,"default",{},void 0,!0)]),_:3})]}),_:3})]),_:3},16)}}}),Se=Y(Pe,[["__scopeId","data-v-424a3bc1"]]),ge={name:"SmartForm"},Te=j({...ge,props:{onSubmit:{},onFinish:{},onFinishFailed:{},onValidate:{},adapter:{default:void 0},model:{default:()=>({})},rules:{},fields:{default:()=>[]},itemSpan:{}},setup(e,{expose:a}){const s=e,m=G(),n=x(()=>Q(s.adapter)),{formProps:d,registerField:l,unregisterField:u}=ve(Object.assign({},s,m)),i=T(null),C=x(()=>n.value==="ant"?Se:we),p=x(()=>Object.assign({},d.value,{class:"smart-form"}));function c(t,...b){var P;const V=i.value;return(P=V?.[t])==null?void 0:P.call(V,...b)}return a({registerField:l,unregisterField:u,validate:(...t)=>c("validate",...t),validateField:(...t)=>c("validateField",...t),resetFields:(...t)=>c("resetFields",...t),scrollToField:(...t)=>c("scrollToField",...t),clearValidate:(...t)=>c("clearValidate",...t),fields:()=>n.value==="element"?c("fields"):void 0,getField:t=>n.value==="element"?c("getField",t):void 0,setInitialValues:t=>n.value==="element"?c("setInitialValues",t):void 0}),(t,b)=>(w(),O(U(C.value),E({ref_key:"formRef",ref:i},p.value),se({default:F(()=>[R(t.$slots,"default",{},void 0,!0)]),_:2},[N(t.$slots,(P,V)=>({name:V,fn:F(I=>[R(t.$slots,V,ee(ae(I)),void 0,!0)])}))]),1040))}}),re=Y(Te,[["__scopeId","data-v-c8716a36"]]);function Oe(e,a,s){if(!s)return e;const m=[...e],n=(d,l)=>{const u=d[a],i=l[a];return u===i?0:u==null?1:i==null?-1:typeof u=="string"&&typeof i=="string"?s==="ascending"?u.localeCompare(i):i.localeCompare(u):s==="ascending"?u>i?1:-1:u<i?1:-1};return m.sort(n)}function Ve(e,a){return!a||Object.keys(a).length===0?e:e.filter(s=>Object.entries(a).every(([m,n])=>{if(n==null||n==="")return!0;const d=s[m];return Array.isArray(n)?n.includes(d):String(d).toLowerCase().includes(String(n).toLowerCase())}))}function De(e,a){const{currentPage:s,pageSize:m}=a,n=(s-1)*m,d=n+m;return e.slice(n,d)}function $e(e){var a,s,m,n;const d=T(!1),l=T({currentPage:typeof e.pagination=="object"&&((a=e.pagination)!=null&&a.currentPage)?e.pagination.currentPage:1,pageSize:typeof e.pagination=="object"&&((s=e.pagination)!=null&&s.pageSize)?e.pagination.pageSize:10,total:typeof e.pagination=="object"&&((m=e.pagination)!=null&&m.total)?e.pagination.total:((n=e.data)==null?void 0:n.length)||0}),u=T({column:void 0,order:null}),i=T({}),C=x(()=>{let v=[...e.data];return e.localFilter&&Object.keys(i.value).length>0&&(v=Ve(v,i.value)),e.localSort&&u.value.column&&u.value.order&&(v=Oe(v,u.value.column,u.value.order)),(e.localPagination||e.localFilter||e.localSort)&&(l.value.total=v.length),e.localPagination&&(v=De(v,l.value)),v}),p=x(()=>ce(e.columns)),c=x(()=>e.pagination?typeof e.pagination=="boolean"?{current:l.value.currentPage,pageSize:l.value.pageSize,total:l.value.total,showSizeChanger:!0,pageSizeOptions:["10","20","50","100"]}:{...e.pagination,current:l.value.currentPage,pageSize:l.value.pageSize,total:l.value.total}:!1),t=x(()=>({border:e.border,size:e.size,stripe:e.stripe,highlightCurrentRow:e.highlightCurrentRow})),b=x(()=>{const v=["onSort","onFilter","onPaginationChange","onReload","data","columns"];return Object.fromEntries(Object.entries(e).filter(([z])=>!v.includes(z)))}),P=x(()=>({data:e.localSort||e.localFilter||e.localPagination?C.value:e.data,columns:p.value,loading:e.loading||d.value,...t.value,pagination:c.value,rowKey:e.rowKey,...b.value})),V=()=>{};return{tableProps:P,refresh:V,reload:async()=>{d.value=!0;try{e.onReload?await e.onReload():V()}finally{d.value=!1}},sort:(v,z)=>{var L,q;if(u.value={column:v,order:z},!e.localSort&&e.onSort)e.onSort(u.value);else try{(typeof process<"u"&&((L=H)==null?void 0:L.NODE_ENV)==="development"||typeof import.meta<"u"&&((q={BASE_URL:"/",MODE:"production",DEV:!1,PROD:!0,SSR:!1})==null?void 0:q.DEV))&&console.debug("Table sort:",v,z)}catch{}},filter:v=>{var z,L;if(i.value={...v},l.value.currentPage=1,!e.localFilter&&e.onFilter)e.onFilter(i.value);else try{(typeof process<"u"&&((z=H)==null?void 0:z.NODE_ENV)==="development"||typeof import.meta<"u"&&((L={BASE_URL:"/",MODE:"production",DEV:!1,PROD:!0,SSR:!1})==null?void 0:L.DEV))&&console.debug("Table filter:",v)}catch{}},paginationState:l,sortState:u,filterState:i,setPagination:v=>{l.value={...l.value,...v},!e.localPagination&&e.onPaginationChange&&e.onPaginationChange(l.value)}}}const Be=j({__name:"Table",props:{adapter:{},data:{},columns:{},loading:{type:Boolean},pagination:{type:[Boolean,Object]},border:{type:Boolean},size:{},stripe:{type:Boolean},highlightCurrentRow:{type:Boolean},rowKey:{type:[String,Function]},onSort:{type:Function},onFilter:{type:Function},onPaginationChange:{type:Function},onReload:{type:Function},localSort:{type:Boolean},localFilter:{type:Boolean},localPagination:{type:Boolean}},setup(e){const a=e,s=x(()=>a.columns?a.columns.map(d=>{const l=d.prop??d.dataIndex??"";return{...d,prop:l,key:l}}):[]);function m(d,l){const u=l.row[d.prop];return typeof d.formatter=="function"?d.formatter(l.row,l.column,u,l.$index):u}const n=x(()=>{const{columns:d,...l}=a;return l});return(d,l)=>{const u=$("el-table-column"),i=$("el-table");return w(),O(i,E(n.value,{class:"smart-table-element"}),{default:F(()=>[(w(!0),A(W,null,N(s.value,C=>(w(),O(u,{key:C.key,prop:C.prop,label:C.label,width:C.width,"min-width":C.minWidth,align:C.align,sortable:C.sortable,fixed:C.fixed},{default:F(p=>[te(J(m(C,p)),1)]),_:2},1032,["prop","label","width","min-width","align","sortable","fixed"]))),128)),R(d.$slots,"default",{},void 0,!0)]),_:3},16)}}}),Ee=Y(Be,[["__scopeId","data-v-e22eb53c"]]),Re=j({__name:"Table",props:{adapter:{},data:{},columns:{},loading:{type:Boolean},pagination:{type:[Boolean,Object]},border:{type:Boolean},size:{},stripe:{type:Boolean},highlightCurrentRow:{type:Boolean},rowKey:{type:[String,Function]},onSort:{type:Function},onFilter:{type:Function},onPaginationChange:{type:Function},onReload:{type:Function},localSort:{type:Boolean},localFilter:{type:Boolean},localPagination:{type:Boolean}},setup(e){const a=e,s=x(()=>a.columns?a.columns.map(n=>{const d=n.dataIndex??n.prop;return{title:n.label,dataIndex:d,key:d,width:n.width,align:n.align,fixed:n.fixed,sorter:n.sortable,customRender:n.formatter?l=>n.formatter(l.record,{dataIndex:d},l.text,l.index):void 0}}):[]),m=x(()=>{const{data:n,columns:d,rowKey:l,...u}=a;return{...u,columns:s.value,dataSource:n,rowKey:l??"id"}});return(n,d)=>{const l=$("a-table");return w(),O(l,E(m.value,{class:"smart-table-ant"}),{default:F(()=>[R(n.$slots,"default",{},void 0,!0)]),_:3},16)}}}),Ie=Y(Re,[["__scopeId","data-v-48950e07"]]),ze={name:"SmartTable"},Me=j({...ze,props:{adapter:{default:void 0},data:{default:()=>[]},columns:{default:()=>[]},loading:{type:Boolean},pagination:{type:[Boolean,Object]},border:{type:Boolean},size:{},stripe:{type:Boolean},highlightCurrentRow:{type:Boolean},rowKey:{},onSort:{},onFilter:{},onPaginationChange:{},onReload:{},localSort:{type:Boolean},localFilter:{type:Boolean},localPagination:{type:Boolean}},setup(e,{expose:a}){const s=e,m=x(()=>Q(s.adapter)),{tableProps:n,refresh:d,reload:l,sort:u,filter:i}=$e(s),C=x(()=>m.value==="ant"?Ie:Ee);return a({refresh:d,reload:l,sort:u,filter:i}),(p,c)=>(w(),O(U(C.value),ee(ae(h(n))),{default:F(()=>[R(p.$slots,"default",{},void 0,!0)]),_:3},16))}}),Ae=Y(Me,[["__scopeId","data-v-d2b68ce5"]]),je=le(re),Ne=le(Ae);typeof window<"u"&&(customElements.define("smart-form",je),customElements.define("smart-table",Ne));const Ue={class:"smart-form-async-example"},Ye={class:"adapter-switcher"},Le={class:"switcher-buttons"},Ke={key:0,class:"submit-result"},We=j({__name:"SmartFormAsyncExample",setup(e){const a=T("ant"),s=T(null),m=T({username:"",bio:"",department:null,gender:"male",hobbies:["reading","coding"],birthdate:null,birthtime:null,age:18,salary:1e4,active:!1,rating:3,manager:""}),n=T({username:[{required:!0,message:"请输入用户名",trigger:"blur"},{min:3,max:20,message:"长度在 3 到 20 个字符",trigger:"blur"}],bio:[{required:!0,message:"请输入个人简介",trigger:"blur"},{min:10,message:"简介长度不能少于 10 个字符",trigger:"blur"}],gender:[{required:!0,message:"请选择性别",trigger:"change"}],birthdate:[{required:!0,message:"请选择出生日期",trigger:"change"}],department:[{required:!0,message:"请选择部门",trigger:"change"}]}),d=T([{name:"username",label:"用户名",type:"input",placeholder:"请输入用户名",defaultValue:"",readonly:!1,span:12,typeProps:{onChange:t=>console.log("用户名变化:",t),onBlur:t=>console.log("用户名失焦:",t),clearable:!0}},{name:"bio",label:"个人简介",type:"textarea",placeholder:"请输入个人简介",disabled:!1,span:24,typeProps:{rows:3,onChange:t=>console.log("简介变化:",t)}},{name:"department",label:"部门",type:"select",placeholder:"请选择部门",span:12,typeProps:{allowClear:!0,onChange:t=>console.log("部门选择变化:",t)},rules:n.value.department,options:[]},{name:"gender",label:"性别",type:"radio",defaultValue:"male",span:12,options:[{label:"男",value:"male"},{label:"女",value:"female"},{label:"其他",value:"other"}],typeProps:{onChange:t=>console.log("性别变化:",t)}},{name:"hobbies",label:"兴趣爱好",type:"checkbox",defaultValue:["reading","coding"],span:24,options:[{label:"阅读",value:"reading"},{label:"运动",value:"sports"},{label:"音乐",value:"music"},{label:"旅行",value:"travel"},{label:"编程",value:"coding"}],typeProps:{onChange:t=>console.log("兴趣爱好变化:",t)}},{name:"birthdate",label:"出生日期",type:"date",span:12,typeProps:{style:{width:"100%"},placeholder:"请选择出生日期",onChange:t=>{const b=d.value.find(P=>P.name==="birthtime");t&&b?b.typeProps.disabled=!1:!t&&b&&(b.typeProps.disabled=!0)}}},{name:"birthtime",label:"出生时间",type:"time",span:12,typeProps:{disabled:!0,style:{width:"100%"},placeholder:"请选择出生时间",onChange:t=>console.log("出生时间变化:",t)}},{name:"age",label:"年龄",type:"input-number",defaultValue:18,span:12,typeProps:{style:{width:"100%"},min:18,max:100,onChange:t=>console.log("年龄变化:",t)}},{name:"salary",label:"薪资范围",type:"slider",defaultValue:1e4,span:24,typeProps:{min:3e3,max:5e4,step:1e3,marks:{3e3:"3k",1e4:"10k",2e4:"20k",5e4:"50k"},onChange:t=>console.log("薪资范围变化:",t)}},{name:"active",label:"是否激活",type:"switch",defaultValue:!1,span:12,typeProps:{onChange:t=>console.log("激活状态变化:",t)}},{name:"rating",label:"评分",type:"rate",defaultValue:3,span:12,typeProps:{onChange:t=>console.log("评分变化:",t)}},{name:"manager",label:"直属领导",type:"mention",placeholder:"请输入领导姓名",span:12,typeProps:{onChange:t=>console.log("领导选择变化:",t),options:[{value:"张三",label:"张三"},{value:"李四",label:"李四"},{value:"王五",label:"王五"}]}}]),l=T("");async function u(){try{await new Promise(P=>setTimeout(P,1e3));const t=[{label:"技术部",value:"tech"},{label:"产品部",value:"product"},{label:"设计部",value:"design"},{label:"市场部",value:"marketing"},{label:"人事部",value:"hr"},{label:"财务部",value:"finance"}],b=d.value.find(P=>P.name==="department");b&&(b.options=t)}catch(t){console.error("加载部门选项失败:",t)}}const i=async()=>{if(s.value)try{await s.value.validate()?l.value=JSON.stringify(m.value,null,2):l.value="表单验证失败，请检查必填项！"}catch(t){l.value="验证过程中发生错误",console.error("表单验证失败:",t)}},C=()=>{s.value&&(s.value.resetFields(),l.value="",console.log("表单已重置"))},p=async()=>{if(s.value)try{const t=await s.value.validateField("username");l.value=t?"用户名验证通过！":"用户名验证失败，请检查输入格式！",console.log("外部调用用户名验证结果:",t)}catch(t){l.value="用户名验证过程中发生错误",console.error("外部调用用户名验证失败:",t)}},c=x(()=>({adapter:a.value,model:m.value,fields:d.value,rules:n.value,labelPosition:"right",labelWidth:"80px",inline:!1,disabled:!1,itemSpan:12,scrollToError:!0,scrollToFirstError:{behavior:"smooth",block:"center"},onSubmit:t=>{console.log(t)}}));return de(()=>{u()}),(t,b)=>(w(),A("div",Ue,[b[4]||(b[4]=D("h3",{class:"form-demo-title"},"示例",-1)),D("div",Ye,[b[2]||(b[2]=D("label",null,"UI 库：",-1)),D("div",Le,[D("button",{type:"button",class:X(["switch-btn",{active:a.value==="element"}]),onClick:b[0]||(b[0]=P=>a.value="element")}," Element Plus ",2),D("button",{type:"button",class:X(["switch-btn",{active:a.value==="ant"}]),onClick:b[1]||(b[1]=P=>a.value="ant")}," Ant Design Vue ",2)])]),D("div",null,[M(h(re),E({ref_key:"smartFormRef",ref:s},c.value),{default:F(()=>[D("div",{class:"form-primary-actions"},[D("button",{type:"button",class:"form-btn reset-btn",onClick:C}," 重置 "),D("button",{type:"button",class:"form-btn submit-btn",onClick:i,"html-type":"submit"}," 提交 "),D("button",{type:"button",class:"demo-btn",onClick:p}," 单独验证用户名 ")])]),_:1},16)]),l.value?(w(),A("div",Ke,[b[3]||(b[3]=D("h4",null,"表单提交结果",-1)),D("pre",null,J(l.value),1)])):K("",!0)]))}}),Ge=ie(We,[["__scopeId","data-v-e79eab8e"]]);export{Ge as default};
